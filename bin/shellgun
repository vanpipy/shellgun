#!/usr/bin/env bash

BASH=/bin/bash
NODE=/usr/local/bin/node

EXEC=$BASH

WHOAMI=$0
COMMAND=$1
CONDITION=$2
PREFIX="gun"

SOURCE="${BASH_SOURCE[0]}"
DIR=`dirname $SOURCE`

MatchPrefix="^--"
MatchNodeScript=".js$"

if [[ $COMMAND =~ $MatchPrefix ]]; then
    originalCommand=$COMMAND
    COMMAND=${COMMAND:2:${#COMMAND}}
fi

if [[ $COMMAND =~ $MatchNodeScript ]]; then
    EXEC=$NODE
fi

function main() {
    #TODO: Make the standard parameter command like -h or --help.  
    if [[ -e  $DIR/$PREFIX-$COMMAND ]]; then
        #TODO: Call another script with custom params.
        $EXEC $DIR/$PREFIX-$COMMAND $CONDITION
    else
        echo "Command $originalCommand did't exist."
        echo

        $EXEC $DIR/$PREFIX-'help'
    fi
}

main
